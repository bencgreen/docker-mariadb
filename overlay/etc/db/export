#!/usr/bin/with-contenv bash

set -euo pipefail


#======================================================================================================================
# Set variables
#======================================================================================================================

BACKUP_PATH=/var/lib/backup
EXPORT_FILE="${BACKUP_PATH}/${1}.sql"


#======================================================================================================================
# Dump database to file
#======================================================================================================================

bcg-echo "Exporting database '${1}' to ${EXPORT_FILE}..."
mariadb-dump --add-locks -uroot -p${MARIADB_ROOT_PASSWORD} "${1}" > "${EXPORT_FILE}" || bcg-error "Unable to export database '${1}'."
bcg-done
