#!/usr/bin/with-contenv bash

set -euo pipefail


#======================================================================================================================
# Set variables
#======================================================================================================================

BACKUP_PATH=/var/lib/backup
EXPORT_FILE="${BACKUP_PATH}/${1}.sql"


#======================================================================================================================
# Dump database to file
#======================================================================================================================

_echo "Exporting database '${1}' to ${EXPORT_FILE}..."
mysqldump --add-locks -uroot -p${MARIADB_ROOT_PASSWORD} "${1}" > "${EXPORT_FILE}" || _error "Unable to export database '${1}'."
_done
